
    <link rel="import" href="esri-map.html">

    <dom-element id="esri-featurelayer">

        <template>
            <div></div>
        </template>

        <script>

            var _featureLayerCount = 0;

            Polymer({

                is: "esri-featurelayer",

                properties : {
                    fs : {
                        type: String,
                        value: undefined, // Set some attribute defaults if none
                        reflectToAttribute : true,
                        notify: true
                    },
                    flid : {
                        type: Number,
                        value: 0,
                        reflectToAttribute : false,
                        notify : true
                    }
                },

                attached : function() {
                    var component = this;
                    var fs = component.fs;
                    var parent = Polymer.dom(component).parentNode;
                    var flid = _featureLayerCount;
                    _featureLayerCount += 1;
                    window.addEventListener('WebComponentsReady', function(e) {
                    component.async(function() {

                        console.log("Initialising Feature Layerr");
                        if ( fs && parent && parent.tagName == "ESRI-MAP") {
                            parent.addFeatureLayer(fs);
                            console.log("Adding FeatureLayer", fs, fs.renderer, parent.map);

                        }

                });// end of async
                }); // WebComponentsReady
                } // End of attached
            });  // End of Polymer


        </script>

    </dom-element>
