
    <link rel="import" href="esri-map.html">

    <dom-element id="esri-featurelayer">

        <template>
            <div></div>
        </template>

        <script>

            Polymer({

                is: "esri-featurelayer",

                properties : {
                    fs : {
                        type: String,
                        value: undefined, // Set some attribute defaults if none
                        reflectToAttribute : true,
                        notify: true
                    },
                    flid : {
                        type: Number,
                        value: 0,
                        reflectToAttribute : false,
                        notify : true
                    }
                },

                attached : function() {
                    var component = this;
                    window.addEventListener("WebComponentsReady", function(){
                    component.async(function() {
                        console.log("Initialising Feature Layerr");
                        var parentComponent = Polymer.dom(component).parentNode;
                        var fs = component.fs;

                        if ( fs && parentComponent && parentComponent.tagName == "ESRI-MAP") {
                            try {
                                parentComponent.featureLayerQueue.push(fs);
                                parentComponent.featureLayerQueueChange();
                            }
                            catch(err) {
                                console.log("Loading error", err);
                            }
                        }

                }); // end of async
                }); // end of WebComponentsReady
                }   // End of attached
            });     // End of Polymer


        </script>

    </dom-element>
